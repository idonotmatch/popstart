"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/graphql";
exports.ids = ["pages/api/graphql"];
exports.modules = {

/***/ "apollo-server-micro":
/*!**************************************!*\
  !*** external "apollo-server-micro" ***!
  \**************************************/
/***/ ((module) => {

module.exports = require("apollo-server-micro");

/***/ }),

/***/ "ioredis":
/*!**************************!*\
  !*** external "ioredis" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("ioredis");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "got":
/*!**********************!*\
  !*** external "got" ***!
  \**********************/
/***/ ((module) => {

module.exports = import("got");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgraphql&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fgraphql.js&middlewareConfigBase64=e30%3D!":
/*!********************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgraphql&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fgraphql.js&middlewareConfigBase64=e30%3D! ***!
  \********************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_graphql_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/graphql.js */ \"(api)/./pages/api/graphql.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_graphql_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_graphql_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_graphql_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_graphql_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/graphql\",\n        pathname: \"/api/graphql\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_graphql_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRmdyYXBocWwmcHJlZmVycmVkUmVnaW9uPSZhYnNvbHV0ZVBhZ2VQYXRoPS4lMkZwYWdlcyUyRmFwaSUyRmdyYXBocWwuanMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7O0FBQXNHO0FBQ3ZDO0FBQ0w7QUFDMUQ7QUFDbUQ7QUFDbkQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLGtEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQyxrREFBUTtBQUNwQztBQUNPLHdCQUF3QixnSEFBbUI7QUFDbEQ7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQscUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1ncmFwaHFsLXByb2plY3QvPzcwMWIiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgUGFnZXNBUElSb3V0ZU1vZHVsZSB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1tb2R1bGVzL3BhZ2VzLWFwaS9tb2R1bGUuY29tcGlsZWRcIjtcbmltcG9ydCB7IFJvdXRlS2luZCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2Z1dHVyZS9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3BhZ2VzL2FwaS9ncmFwaHFsLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvZ3JhcGhxbFwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2dyYXBocWxcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiBcIlwiLFxuICAgICAgICBmaWxlbmFtZTogXCJcIlxuICAgIH0sXG4gICAgdXNlcmxhbmRcbn0pO1xuXG4vLyMgc291cmNlTWFwcGluZ1VSTD1wYWdlcy1hcGkuanMubWFwIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgraphql&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fgraphql.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./lib/redisClient.js":
/*!****************************!*\
  !*** ./lib/redisClient.js ***!
  \****************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__)\n/* harmony export */ });\n/* harmony import */ var ioredis__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ioredis */ \"ioredis\");\n/* harmony import */ var ioredis__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(ioredis__WEBPACK_IMPORTED_MODULE_0__);\n\nconst redisUrl = process.env.UPSTASH_REDIS_URL;\nif (!redisUrl) {\n    throw new Error(\"UPSTASH_REDIS_URL environment variable is not set\");\n}\nconst redis = new (ioredis__WEBPACK_IMPORTED_MODULE_0___default())(redisUrl, {\n    tls: {\n        rejectUnauthorized: false\n    },\n    connectTimeout: 10000,\n    maxRetriesPerRequest: 5,\n    retryStrategy: (times)=>{\n        const delay = Math.min(times * 50, 2000); // Try up to 2 seconds between retries\n        console.log(`Reconnecting to Redis after ${delay}ms`);\n        return delay;\n    }\n});\nredis.on(\"error\", (err)=>{\n    console.error(\"Redis error:\", err);\n});\nredis.on(\"connect\", ()=>{\n    console.log(\"Connected to Redis\");\n});\nredis.on(\"reconnecting\", (delay)=>{\n    console.log(`Reconnecting to Redis after ${delay}ms`);\n});\nredis.on(\"end\", ()=>{\n    console.log(\"Redis connection ended\");\n});\nredis.on(\"ready\", ()=>{\n    console.log(\"Redis client is ready to use\");\n});\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = (redis);\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9saWIvcmVkaXNDbGllbnQuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7O0FBQTRCO0FBRTVCLE1BQU1DLFdBQVdDLFFBQVFDLEdBQUcsQ0FBQ0MsaUJBQWlCO0FBRTlDLElBQUksQ0FBQ0gsVUFBVTtJQUNiLE1BQU0sSUFBSUksTUFBTTtBQUNsQjtBQUVBLE1BQU1DLFFBQVEsSUFBSU4sZ0RBQUtBLENBQUNDLFVBQVU7SUFDaENNLEtBQUs7UUFDSEMsb0JBQW9CO0lBQ3RCO0lBQ0FDLGdCQUFnQjtJQUNoQkMsc0JBQXNCO0lBQ3RCQyxlQUFlLENBQUNDO1FBQ2QsTUFBTUMsUUFBUUMsS0FBS0MsR0FBRyxDQUFDSCxRQUFRLElBQUksT0FBTyxzQ0FBc0M7UUFDaEZJLFFBQVFDLEdBQUcsQ0FBQyxDQUFDLDRCQUE0QixFQUFFSixNQUFNLEVBQUUsQ0FBQztRQUNwRCxPQUFPQTtJQUNUO0FBQ0Y7QUFFQVAsTUFBTVksRUFBRSxDQUFDLFNBQVMsQ0FBQ0M7SUFDakJILFFBQVFJLEtBQUssQ0FBQyxnQkFBZ0JEO0FBQ2hDO0FBRUFiLE1BQU1ZLEVBQUUsQ0FBQyxXQUFXO0lBQ2xCRixRQUFRQyxHQUFHLENBQUM7QUFDZDtBQUVBWCxNQUFNWSxFQUFFLENBQUMsZ0JBQWdCLENBQUNMO0lBQ3hCRyxRQUFRQyxHQUFHLENBQUMsQ0FBQyw0QkFBNEIsRUFBRUosTUFBTSxFQUFFLENBQUM7QUFDdEQ7QUFFQVAsTUFBTVksRUFBRSxDQUFDLE9BQU87SUFDZEYsUUFBUUMsR0FBRyxDQUFDO0FBQ2Q7QUFFQVgsTUFBTVksRUFBRSxDQUFDLFNBQVM7SUFDaEJGLFFBQVFDLEdBQUcsQ0FBQztBQUNkO0FBRUEsaUVBQWVYLEtBQUtBLEVBQUMiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1ncmFwaHFsLXByb2plY3QvLi9saWIvcmVkaXNDbGllbnQuanM/ZWVkMiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUmVkaXMgZnJvbSAnaW9yZWRpcyc7XG5cbmNvbnN0IHJlZGlzVXJsID0gcHJvY2Vzcy5lbnYuVVBTVEFTSF9SRURJU19VUkw7XG5cbmlmICghcmVkaXNVcmwpIHtcbiAgdGhyb3cgbmV3IEVycm9yKFwiVVBTVEFTSF9SRURJU19VUkwgZW52aXJvbm1lbnQgdmFyaWFibGUgaXMgbm90IHNldFwiKTtcbn1cblxuY29uc3QgcmVkaXMgPSBuZXcgUmVkaXMocmVkaXNVcmwsIHtcbiAgdGxzOiB7XG4gICAgcmVqZWN0VW5hdXRob3JpemVkOiBmYWxzZSwgLy8gU2V0IHRvIHRydWUgaW4gcHJvZHVjdGlvbiB3aXRoIGEgdHJ1c3RlZCBjZXJ0aWZpY2F0ZSBhdXRob3JpdHlcbiAgfSxcbiAgY29ubmVjdFRpbWVvdXQ6IDEwMDAwLCAvLyAxMCBzZWNvbmRzIGNvbm5lY3Rpb24gdGltZW91dFxuICBtYXhSZXRyaWVzUGVyUmVxdWVzdDogNSxcbiAgcmV0cnlTdHJhdGVneTogKHRpbWVzKSA9PiB7XG4gICAgY29uc3QgZGVsYXkgPSBNYXRoLm1pbih0aW1lcyAqIDUwLCAyMDAwKTsgLy8gVHJ5IHVwIHRvIDIgc2Vjb25kcyBiZXR3ZWVuIHJldHJpZXNcbiAgICBjb25zb2xlLmxvZyhgUmVjb25uZWN0aW5nIHRvIFJlZGlzIGFmdGVyICR7ZGVsYXl9bXNgKTtcbiAgICByZXR1cm4gZGVsYXk7XG4gIH0sXG59KTtcblxucmVkaXMub24oJ2Vycm9yJywgKGVycikgPT4ge1xuICBjb25zb2xlLmVycm9yKCdSZWRpcyBlcnJvcjonLCBlcnIpO1xufSk7XG5cbnJlZGlzLm9uKCdjb25uZWN0JywgKCkgPT4ge1xuICBjb25zb2xlLmxvZygnQ29ubmVjdGVkIHRvIFJlZGlzJyk7XG59KTtcblxucmVkaXMub24oJ3JlY29ubmVjdGluZycsIChkZWxheSkgPT4ge1xuICBjb25zb2xlLmxvZyhgUmVjb25uZWN0aW5nIHRvIFJlZGlzIGFmdGVyICR7ZGVsYXl9bXNgKTtcbn0pO1xuXG5yZWRpcy5vbignZW5kJywgKCkgPT4ge1xuICBjb25zb2xlLmxvZygnUmVkaXMgY29ubmVjdGlvbiBlbmRlZCcpO1xufSk7XG5cbnJlZGlzLm9uKCdyZWFkeScsICgpID0+IHtcbiAgY29uc29sZS5sb2coJ1JlZGlzIGNsaWVudCBpcyByZWFkeSB0byB1c2UnKTtcbn0pO1xuXG5leHBvcnQgZGVmYXVsdCByZWRpcztcbiJdLCJuYW1lcyI6WyJSZWRpcyIsInJlZGlzVXJsIiwicHJvY2VzcyIsImVudiIsIlVQU1RBU0hfUkVESVNfVVJMIiwiRXJyb3IiLCJyZWRpcyIsInRscyIsInJlamVjdFVuYXV0aG9yaXplZCIsImNvbm5lY3RUaW1lb3V0IiwibWF4UmV0cmllc1BlclJlcXVlc3QiLCJyZXRyeVN0cmF0ZWd5IiwidGltZXMiLCJkZWxheSIsIk1hdGgiLCJtaW4iLCJjb25zb2xlIiwibG9nIiwib24iLCJlcnIiLCJlcnJvciJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./lib/redisClient.js\n");

/***/ }),

/***/ "(api)/./pages/api/graphql.js":
/*!******************************!*\
  !*** ./pages/api/graphql.js ***!
  \******************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var apollo_server_micro__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! apollo-server-micro */ \"apollo-server-micro\");\n/* harmony import */ var apollo_server_micro__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(apollo_server_micro__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var got__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! got */ \"got\");\n/* harmony import */ var _lib_redisClient_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../lib/redisClient.js */ \"(api)/./lib/redisClient.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([got__WEBPACK_IMPORTED_MODULE_1__]);\ngot__WEBPACK_IMPORTED_MODULE_1__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\nconst typeDefs = (0,apollo_server_micro__WEBPACK_IMPORTED_MODULE_0__.gql)`\n  type Query {\n    searchProducts(searchTerm: String!, source: String!): [Product]\n    searchProductsCombined(searchTerm: String!): [Product]\n  }\n\n  type Product {\n    asin: String\n    title: String\n    link: String\n    image: String\n    isPrime: Boolean\n    rating: Float\n    ratingsTotal: Int\n    price: String\n    availability: String\n    source: String\n    brand: String\n  }\n`;\nconst fetchWithRetry = async (url, params, retries = 3)=>{\n    let lastError;\n    const delay = (ms)=>new Promise((resolve)=>setTimeout(resolve, ms));\n    for(let i = 0; i < retries; i++){\n        try {\n            const response = await (0,got__WEBPACK_IMPORTED_MODULE_1__[\"default\"])(url, {\n                searchParams: params,\n                responseType: \"json\"\n            });\n            if (response.statusCode === 200) {\n                return response.body;\n            }\n            lastError = new Error(`API call failed with status: ${response.statusCode}`);\n        } catch (error) {\n            lastError = error;\n        }\n        await delay(1000 * Math.pow(2, i)); // Exponential backoff\n    }\n    throw lastError;\n};\nconst mapRainforestProduct = (item)=>({\n        asin: item.asin,\n        title: item.title,\n        link: item.link,\n        image: item.image,\n        isPrime: item.is_prime,\n        rating: item.rating,\n        ratingsTotal: item.ratings_total,\n        price: item.price?.value ? `$${item.price.value}` : \"Unavailable\",\n        availability: item.availability || \"Unavailable\",\n        source: \"rainforest\",\n        brand: item.brand || \"Unavailable\"\n    });\nconst mapBluecartProduct = (item)=>({\n        asin: item.product.item_id,\n        title: item.product.title,\n        link: item.product.link,\n        image: item.product.main_image || (item.product.images.length > 0 ? item.product.images[0] : \"\"),\n        isPrime: false,\n        rating: item.product.rating || 0,\n        ratingsTotal: item.product.ratings_total || 0,\n        price: item.offers.primary ? `${item.offers.primary.currency_symbol}${item.offers.primary.price}` : \"N/A\",\n        availability: item.inventory.in_stock ? \"In stock\" : \"Out of stock\",\n        source: \"bluecart\",\n        brand: item.product.brand || \"Unavailable\"\n    });\nconst resolvers = {\n    Query: {\n        searchProducts: async (_, { searchTerm, source })=>{\n            let data = [];\n            const start = performance.now(); // Start timer for logging\n            // Generate a unique cache key based on the search term and source\n            const cacheKey = `${source}:${searchTerm}`;\n            // Check Redis cache\n            const cachedResults = await _lib_redisClient_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].get(cacheKey);\n            if (cachedResults) {\n                console.log(\"Returning cached results\");\n                return JSON.parse(cachedResults);\n            }\n            if (source === \"rainforest\") {\n                const params = {\n                    api_key: process.env.RAINFOREST_API_KEY,\n                    type: \"search\",\n                    amazon_domain: \"amazon.com\",\n                    search_term: searchTerm,\n                    fields: \"asin,title,link,image,is_prime,rating,ratings_total,price,availability,brand\" // Request only necessary fields\n                };\n                try {\n                    const response = await fetchWithRetry(\"https://api.rainforestapi.com/request\", params);\n                    data = response.search_results.map(mapRainforestProduct);\n                } catch (error) {\n                    console.error(\"Failed to fetch data from Rainforest API:\", error);\n                    throw new Error(\"Failed to fetch data\");\n                }\n            } else if (source === \"bluecart\") {\n                const params = {\n                    api_key: process.env.BLUECART_API_KEY,\n                    search_term: searchTerm,\n                    type: \"search\",\n                    sort_by: \"best_match\",\n                    page: \"1\",\n                    max_page: \"1\",\n                    output: \"json\",\n                    include_html: \"false\"\n                };\n                try {\n                    const response = await fetchWithRetry(\"https://api.bluecartapi.com/request\", params);\n                    data = response.search_results.map(mapBluecartProduct);\n                } catch (error) {\n                    console.error(\"Failed to fetch data from Bluecart API:\", error);\n                    throw new Error(\"Failed to fetch data\");\n                }\n            }\n            // Store results in Redis with a 24-hour expiration time\n            await _lib_redisClient_js__WEBPACK_IMPORTED_MODULE_2__[\"default\"].set(cacheKey, JSON.stringify(data), {\n                EX: 86400\n            });\n            const end = performance.now(); // End timer\n            console.log(`API call for ${source} took ${end - start} milliseconds`); // Log time taken\n            return data;\n        },\n        searchProductsCombined: async (_, { searchTerm })=>{\n            const start = performance.now(); // Start timer\n            const [rainforestResults, bluecartResults] = await Promise.all([\n                resolvers.Query.searchProducts(_, {\n                    searchTerm,\n                    source: \"rainforest\"\n                }),\n                resolvers.Query.searchProducts(_, {\n                    searchTerm,\n                    source: \"bluecart\"\n                })\n            ]);\n            const end = performance.now(); // End timer\n            console.log(`Combined search took ${end - start} milliseconds`); // Log time taken\n            return [\n                ...rainforestResults,\n                ...bluecartResults\n            ];\n        }\n    }\n};\nlet apolloServer = null;\nconst initializeApolloServer = async ()=>{\n    if (!apolloServer) {\n        apolloServer = new apollo_server_micro__WEBPACK_IMPORTED_MODULE_0__.ApolloServer({\n            typeDefs,\n            resolvers\n        });\n        await apolloServer.start();\n    }\n};\nasync function handler(req, res) {\n    await initializeApolloServer();\n    return apolloServer.createHandler({\n        path: \"/api/graphql\"\n    })(req, res);\n}\nconst config = {\n    api: {\n        bodyParser: false\n    }\n};\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFTO0lBQ3BCQyxLQUFLO1FBQ0hDLFlBQVk7SUFDZDtBQUNGLEVBQUUiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9teS1ncmFwaHFsLXByb2plY3QvLi9wYWdlcy9hcGkvZ3JhcGhxbC5qcz83NjZlIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwb2xsb1NlcnZlciwgZ3FsIH0gZnJvbSAnYXBvbGxvLXNlcnZlci1taWNybyc7XG5pbXBvcnQgZ290IGZyb20gJ2dvdCc7XG5pbXBvcnQgcmVkaXNDbGllbnQgZnJvbSAnLi4vLi4vbGliL3JlZGlzQ2xpZW50LmpzJztcblxuY29uc3QgdHlwZURlZnMgPSBncWxgXG4gIHR5cGUgUXVlcnkge1xuICAgIHNlYXJjaFByb2R1Y3RzKHNlYXJjaFRlcm06IFN0cmluZyEsIHNvdXJjZTogU3RyaW5nISk6IFtQcm9kdWN0XVxuICAgIHNlYXJjaFByb2R1Y3RzQ29tYmluZWQoc2VhcmNoVGVybTogU3RyaW5nISk6IFtQcm9kdWN0XVxuICB9XG5cbiAgdHlwZSBQcm9kdWN0IHtcbiAgICBhc2luOiBTdHJpbmdcbiAgICB0aXRsZTogU3RyaW5nXG4gICAgbGluazogU3RyaW5nXG4gICAgaW1hZ2U6IFN0cmluZ1xuICAgIGlzUHJpbWU6IEJvb2xlYW5cbiAgICByYXRpbmc6IEZsb2F0XG4gICAgcmF0aW5nc1RvdGFsOiBJbnRcbiAgICBwcmljZTogU3RyaW5nXG4gICAgYXZhaWxhYmlsaXR5OiBTdHJpbmdcbiAgICBzb3VyY2U6IFN0cmluZ1xuICAgIGJyYW5kOiBTdHJpbmdcbiAgfVxuYDtcblxuY29uc3QgZmV0Y2hXaXRoUmV0cnkgPSBhc3luYyAodXJsLCBwYXJhbXMsIHJldHJpZXMgPSAzKSA9PiB7XG4gIGxldCBsYXN0RXJyb3I7XG4gIGNvbnN0IGRlbGF5ID0gKG1zKSA9PiBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgbXMpKTtcblxuICBmb3IgKGxldCBpID0gMDsgaSA8IHJldHJpZXM7IGkrKykge1xuICAgIHRyeSB7XG4gICAgICBjb25zdCByZXNwb25zZSA9IGF3YWl0IGdvdCh1cmwsIHsgc2VhcmNoUGFyYW1zOiBwYXJhbXMsIHJlc3BvbnNlVHlwZTogJ2pzb24nIH0pO1xuICAgICAgaWYgKHJlc3BvbnNlLnN0YXR1c0NvZGUgPT09IDIwMCkge1xuICAgICAgICByZXR1cm4gcmVzcG9uc2UuYm9keTtcbiAgICAgIH1cbiAgICAgIGxhc3RFcnJvciA9IG5ldyBFcnJvcihgQVBJIGNhbGwgZmFpbGVkIHdpdGggc3RhdHVzOiAke3Jlc3BvbnNlLnN0YXR1c0NvZGV9YCk7XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGxhc3RFcnJvciA9IGVycm9yO1xuICAgIH1cbiAgICBhd2FpdCBkZWxheSgxMDAwICogTWF0aC5wb3coMiwgaSkpOyAvLyBFeHBvbmVudGlhbCBiYWNrb2ZmXG4gIH1cbiAgdGhyb3cgbGFzdEVycm9yO1xufTtcblxuY29uc3QgbWFwUmFpbmZvcmVzdFByb2R1Y3QgPSAoaXRlbSkgPT4gKHtcbiAgYXNpbjogaXRlbS5hc2luLFxuICB0aXRsZTogaXRlbS50aXRsZSxcbiAgbGluazogaXRlbS5saW5rLFxuICBpbWFnZTogaXRlbS5pbWFnZSxcbiAgaXNQcmltZTogaXRlbS5pc19wcmltZSxcbiAgcmF0aW5nOiBpdGVtLnJhdGluZyxcbiAgcmF0aW5nc1RvdGFsOiBpdGVtLnJhdGluZ3NfdG90YWwsXG4gIHByaWNlOiBpdGVtLnByaWNlPy52YWx1ZSA/IGAkJHtpdGVtLnByaWNlLnZhbHVlfWAgOiAnVW5hdmFpbGFibGUnLFxuICBhdmFpbGFiaWxpdHk6IGl0ZW0uYXZhaWxhYmlsaXR5IHx8ICdVbmF2YWlsYWJsZScsXG4gIHNvdXJjZTogJ3JhaW5mb3Jlc3QnLFxuICBicmFuZDogaXRlbS5icmFuZCB8fCAnVW5hdmFpbGFibGUnXG59KTtcblxuY29uc3QgbWFwQmx1ZWNhcnRQcm9kdWN0ID0gKGl0ZW0pID0+ICh7XG4gIGFzaW46IGl0ZW0ucHJvZHVjdC5pdGVtX2lkLFxuICB0aXRsZTogaXRlbS5wcm9kdWN0LnRpdGxlLFxuICBsaW5rOiBpdGVtLnByb2R1Y3QubGluayxcbiAgaW1hZ2U6IGl0ZW0ucHJvZHVjdC5tYWluX2ltYWdlIHx8IChpdGVtLnByb2R1Y3QuaW1hZ2VzLmxlbmd0aCA+IDAgPyBpdGVtLnByb2R1Y3QuaW1hZ2VzWzBdIDogXCJcIiksXG4gIGlzUHJpbWU6IGZhbHNlLFxuICByYXRpbmc6IGl0ZW0ucHJvZHVjdC5yYXRpbmcgfHwgMCxcbiAgcmF0aW5nc1RvdGFsOiBpdGVtLnByb2R1Y3QucmF0aW5nc190b3RhbCB8fCAwLFxuICBwcmljZTogaXRlbS5vZmZlcnMucHJpbWFyeSA/IGAke2l0ZW0ub2ZmZXJzLnByaW1hcnkuY3VycmVuY3lfc3ltYm9sfSR7aXRlbS5vZmZlcnMucHJpbWFyeS5wcmljZX1gIDogXCJOL0FcIixcbiAgYXZhaWxhYmlsaXR5OiBpdGVtLmludmVudG9yeS5pbl9zdG9jayA/IFwiSW4gc3RvY2tcIiA6IFwiT3V0IG9mIHN0b2NrXCIsXG4gIHNvdXJjZTogJ2JsdWVjYXJ0JyxcbiAgYnJhbmQ6IGl0ZW0ucHJvZHVjdC5icmFuZCB8fCAnVW5hdmFpbGFibGUnXG59KTtcblxuY29uc3QgcmVzb2x2ZXJzID0ge1xuICBRdWVyeToge1xuICAgIHNlYXJjaFByb2R1Y3RzOiBhc3luYyAoXywgeyBzZWFyY2hUZXJtLCBzb3VyY2UgfSkgPT4ge1xuICAgICAgbGV0IGRhdGEgPSBbXTtcbiAgICAgIGNvbnN0IHN0YXJ0ID0gcGVyZm9ybWFuY2Uubm93KCk7IC8vIFN0YXJ0IHRpbWVyIGZvciBsb2dnaW5nXG5cbiAgICAgIC8vIEdlbmVyYXRlIGEgdW5pcXVlIGNhY2hlIGtleSBiYXNlZCBvbiB0aGUgc2VhcmNoIHRlcm0gYW5kIHNvdXJjZVxuICAgICAgY29uc3QgY2FjaGVLZXkgPSBgJHtzb3VyY2V9OiR7c2VhcmNoVGVybX1gO1xuXG4gICAgICAvLyBDaGVjayBSZWRpcyBjYWNoZVxuICAgICAgY29uc3QgY2FjaGVkUmVzdWx0cyA9IGF3YWl0IHJlZGlzQ2xpZW50LmdldChjYWNoZUtleSk7XG4gICAgICBpZiAoY2FjaGVkUmVzdWx0cykge1xuICAgICAgICBjb25zb2xlLmxvZygnUmV0dXJuaW5nIGNhY2hlZCByZXN1bHRzJyk7XG4gICAgICAgIHJldHVybiBKU09OLnBhcnNlKGNhY2hlZFJlc3VsdHMpO1xuICAgICAgfVxuXG4gICAgICBpZiAoc291cmNlID09PSAncmFpbmZvcmVzdCcpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgIGFwaV9rZXk6IHByb2Nlc3MuZW52LlJBSU5GT1JFU1RfQVBJX0tFWSxcbiAgICAgICAgICB0eXBlOiBcInNlYXJjaFwiLFxuICAgICAgICAgIGFtYXpvbl9kb21haW46IFwiYW1hem9uLmNvbVwiLFxuICAgICAgICAgIHNlYXJjaF90ZXJtOiBzZWFyY2hUZXJtLFxuICAgICAgICAgIGZpZWxkczogXCJhc2luLHRpdGxlLGxpbmssaW1hZ2UsaXNfcHJpbWUscmF0aW5nLHJhdGluZ3NfdG90YWwscHJpY2UsYXZhaWxhYmlsaXR5LGJyYW5kXCIgLy8gUmVxdWVzdCBvbmx5IG5lY2Vzc2FyeSBmaWVsZHNcbiAgICAgICAgfTtcblxuICAgICAgICB0cnkge1xuICAgICAgICAgIGNvbnN0IHJlc3BvbnNlID0gYXdhaXQgZmV0Y2hXaXRoUmV0cnkoJ2h0dHBzOi8vYXBpLnJhaW5mb3Jlc3RhcGkuY29tL3JlcXVlc3QnLCBwYXJhbXMpO1xuICAgICAgICAgIGRhdGEgPSByZXNwb25zZS5zZWFyY2hfcmVzdWx0cy5tYXAobWFwUmFpbmZvcmVzdFByb2R1Y3QpO1xuICAgICAgICB9IGNhdGNoIChlcnJvcikge1xuICAgICAgICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBmZXRjaCBkYXRhIGZyb20gUmFpbmZvcmVzdCBBUEk6JywgZXJyb3IpO1xuICAgICAgICAgIHRocm93IG5ldyBFcnJvcignRmFpbGVkIHRvIGZldGNoIGRhdGEnKTtcbiAgICAgICAgfVxuICAgICAgfSBlbHNlIGlmIChzb3VyY2UgPT09ICdibHVlY2FydCcpIHtcbiAgICAgICAgY29uc3QgcGFyYW1zID0ge1xuICAgICAgICAgIGFwaV9rZXk6IHByb2Nlc3MuZW52LkJMVUVDQVJUX0FQSV9LRVksXG4gICAgICAgICAgc2VhcmNoX3Rlcm06IHNlYXJjaFRlcm0sXG4gICAgICAgICAgdHlwZTogXCJzZWFyY2hcIixcbiAgICAgICAgICBzb3J0X2J5OiBcImJlc3RfbWF0Y2hcIixcbiAgICAgICAgICBwYWdlOiBcIjFcIixcbiAgICAgICAgICBtYXhfcGFnZTogXCIxXCIsXG4gICAgICAgICAgb3V0cHV0OiBcImpzb25cIixcbiAgICAgICAgICBpbmNsdWRlX2h0bWw6IFwiZmFsc2VcIlxuICAgICAgICB9O1xuXG4gICAgICAgIHRyeSB7XG4gICAgICAgICAgY29uc3QgcmVzcG9uc2UgPSBhd2FpdCBmZXRjaFdpdGhSZXRyeSgnaHR0cHM6Ly9hcGkuYmx1ZWNhcnRhcGkuY29tL3JlcXVlc3QnLCBwYXJhbXMpO1xuICAgICAgICAgIGRhdGEgPSByZXNwb25zZS5zZWFyY2hfcmVzdWx0cy5tYXAobWFwQmx1ZWNhcnRQcm9kdWN0KTtcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgICAgICBjb25zb2xlLmVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggZGF0YSBmcm9tIEJsdWVjYXJ0IEFQSTonLCBlcnJvcik7XG4gICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdGYWlsZWQgdG8gZmV0Y2ggZGF0YScpO1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIC8vIFN0b3JlIHJlc3VsdHMgaW4gUmVkaXMgd2l0aCBhIDI0LWhvdXIgZXhwaXJhdGlvbiB0aW1lXG4gICAgICBhd2FpdCByZWRpc0NsaWVudC5zZXQoY2FjaGVLZXksIEpTT04uc3RyaW5naWZ5KGRhdGEpLCB7XG4gICAgICAgIEVYOiA4NjQwMCwgLy8gMjQgaG91cnNcbiAgICAgIH0pO1xuXG4gICAgICBjb25zdCBlbmQgPSBwZXJmb3JtYW5jZS5ub3coKTsgLy8gRW5kIHRpbWVyXG4gICAgICBjb25zb2xlLmxvZyhgQVBJIGNhbGwgZm9yICR7c291cmNlfSB0b29rICR7ZW5kIC0gc3RhcnR9IG1pbGxpc2Vjb25kc2ApOyAvLyBMb2cgdGltZSB0YWtlblxuXG4gICAgICByZXR1cm4gZGF0YTtcbiAgICB9LFxuICAgIHNlYXJjaFByb2R1Y3RzQ29tYmluZWQ6IGFzeW5jIChfLCB7IHNlYXJjaFRlcm0gfSkgPT4ge1xuICAgICAgY29uc3Qgc3RhcnQgPSBwZXJmb3JtYW5jZS5ub3coKTsgLy8gU3RhcnQgdGltZXJcbiAgICAgIGNvbnN0IFtyYWluZm9yZXN0UmVzdWx0cywgYmx1ZWNhcnRSZXN1bHRzXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgICAgcmVzb2x2ZXJzLlF1ZXJ5LnNlYXJjaFByb2R1Y3RzKF8sIHsgc2VhcmNoVGVybSwgc291cmNlOiAncmFpbmZvcmVzdCcgfSksXG4gICAgICAgIHJlc29sdmVycy5RdWVyeS5zZWFyY2hQcm9kdWN0cyhfLCB7IHNlYXJjaFRlcm0sIHNvdXJjZTogJ2JsdWVjYXJ0JyB9KVxuICAgICAgXSk7XG4gICAgICBjb25zdCBlbmQgPSBwZXJmb3JtYW5jZS5ub3coKTsgLy8gRW5kIHRpbWVyXG4gICAgICBjb25zb2xlLmxvZyhgQ29tYmluZWQgc2VhcmNoIHRvb2sgJHtlbmQgLSBzdGFydH0gbWlsbGlzZWNvbmRzYCk7IC8vIExvZyB0aW1lIHRha2VuXG5cbiAgICAgIHJldHVybiBbLi4ucmFpbmZvcmVzdFJlc3VsdHMsIC4uLmJsdWVjYXJ0UmVzdWx0c107XG4gICAgfVxuICB9XG59O1xuXG5sZXQgYXBvbGxvU2VydmVyID0gbnVsbDtcbmNvbnN0IGluaXRpYWxpemVBcG9sbG9TZXJ2ZXIgPSBhc3luYyAoKSA9PiB7XG4gIGlmICghYXBvbGxvU2VydmVyKSB7XG4gICAgYXBvbGxvU2VydmVyID0gbmV3IEFwb2xsb1NlcnZlcih7IHR5cGVEZWZzLCByZXNvbHZlcnMgfSk7XG4gICAgYXdhaXQgYXBvbGxvU2VydmVyLnN0YXJ0KCk7XG4gIH1cbn07XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxLCByZXMpIHtcbiAgYXdhaXQgaW5pdGlhbGl6ZUFwb2xsb1NlcnZlcigpO1xuICByZXR1cm4gYXBvbGxvU2VydmVyLmNyZWF0ZUhhbmRsZXIoeyBwYXRoOiAnL2FwaS9ncmFwaHFsJyB9KShyZXEsIHJlcyk7XG59XG5cbmV4cG9ydCBjb25zdCBjb25maWcgPSB7XG4gIGFwaToge1xuICAgIGJvZHlQYXJzZXI6IGZhbHNlLFxuICB9LFxufTtcbiJdLCJuYW1lcyI6WyJBcG9sbG9TZXJ2ZXIiLCJncWwiLCJnb3QiLCJyZWRpc0NsaWVudCIsInR5cGVEZWZzIiwiZmV0Y2hXaXRoUmV0cnkiLCJ1cmwiLCJwYXJhbXMiLCJyZXRyaWVzIiwibGFzdEVycm9yIiwiZGVsYXkiLCJtcyIsIlByb21pc2UiLCJyZXNvbHZlIiwic2V0VGltZW91dCIsImkiLCJyZXNwb25zZSIsInNlYXJjaFBhcmFtcyIsInJlc3BvbnNlVHlwZSIsInN0YXR1c0NvZGUiLCJib2R5IiwiRXJyb3IiLCJlcnJvciIsIk1hdGgiLCJwb3ciLCJtYXBSYWluZm9yZXN0UHJvZHVjdCIsIml0ZW0iLCJhc2luIiwidGl0bGUiLCJsaW5rIiwiaW1hZ2UiLCJpc1ByaW1lIiwiaXNfcHJpbWUiLCJyYXRpbmciLCJyYXRpbmdzVG90YWwiLCJyYXRpbmdzX3RvdGFsIiwicHJpY2UiLCJ2YWx1ZSIsImF2YWlsYWJpbGl0eSIsInNvdXJjZSIsImJyYW5kIiwibWFwQmx1ZWNhcnRQcm9kdWN0IiwicHJvZHVjdCIsIml0ZW1faWQiLCJtYWluX2ltYWdlIiwiaW1hZ2VzIiwibGVuZ3RoIiwib2ZmZXJzIiwicHJpbWFyeSIsImN1cnJlbmN5X3N5bWJvbCIsImludmVudG9yeSIsImluX3N0b2NrIiwicmVzb2x2ZXJzIiwiUXVlcnkiLCJzZWFyY2hQcm9kdWN0cyIsIl8iLCJzZWFyY2hUZXJtIiwiZGF0YSIsInN0YXJ0IiwicGVyZm9ybWFuY2UiLCJub3ciLCJjYWNoZUtleSIsImNhY2hlZFJlc3VsdHMiLCJnZXQiLCJjb25zb2xlIiwibG9nIiwiSlNPTiIsInBhcnNlIiwiYXBpX2tleSIsInByb2Nlc3MiLCJlbnYiLCJSQUlORk9SRVNUX0FQSV9LRVkiLCJ0eXBlIiwiYW1hem9uX2RvbWFpbiIsInNlYXJjaF90ZXJtIiwiZmllbGRzIiwic2VhcmNoX3Jlc3VsdHMiLCJtYXAiLCJCTFVFQ0FSVF9BUElfS0VZIiwic29ydF9ieSIsInBhZ2UiLCJtYXhfcGFnZSIsIm91dHB1dCIsImluY2x1ZGVfaHRtbCIsInNldCIsInN0cmluZ2lmeSIsIkVYIiwiZW5kIiwic2VhcmNoUHJvZHVjdHNDb21iaW5lZCIsInJhaW5mb3Jlc3RSZXN1bHRzIiwiYmx1ZWNhcnRSZXN1bHRzIiwiYWxsIiwiYXBvbGxvU2VydmVyIiwiaW5pdGlhbGl6ZUFwb2xsb1NlcnZlciIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJjcmVhdGVIYW5kbGVyIiwicGF0aCIsImNvbmZpZyIsImFwaSIsImJvZHlQYXJzZXIiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api)/./pages/api/graphql.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fgraphql&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fgraphql.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();