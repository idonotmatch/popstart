"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/search";
exports.ids = ["pages/api/search"];
exports.modules = {

/***/ "dotenv":
/*!*************************!*\
  !*** external "dotenv" ***!
  \*************************/
/***/ ((module) => {

module.exports = require("dotenv");

/***/ }),

/***/ "ioredis":
/*!**************************!*\
  !*** external "ioredis" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("ioredis");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ }),

/***/ "axios":
/*!************************!*\
  !*** external "axios" ***!
  \************************/
/***/ ((module) => {

module.exports = import("axios");;

/***/ }),

/***/ "(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsearch&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsearch.js&middlewareConfigBase64=e30%3D!":
/*!******************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsearch&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsearch.js&middlewareConfigBase64=e30%3D! ***!
  \******************************************************************************************************************************************************************************************************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/pages-api/module.compiled */ \"(api)/./node_modules/next/dist/server/future/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(api)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _pages_api_search_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./pages/api/search.js */ \"(api)/./pages/api/search.js\");\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([_pages_api_search_js__WEBPACK_IMPORTED_MODULE_3__]);\n_pages_api_search_js__WEBPACK_IMPORTED_MODULE_3__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_search_js__WEBPACK_IMPORTED_MODULE_3__, \"default\"));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_pages_api_search_js__WEBPACK_IMPORTED_MODULE_3__, \"config\");\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_future_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/search\",\n        pathname: \"/api/search\",\n        // The following aren't used in production.\n        bundlePath: \"\",\n        filename: \"\"\n    },\n    userland: _pages_api_search_js__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaSkvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LXJvdXRlLWxvYWRlci9pbmRleC5qcz9raW5kPVBBR0VTX0FQSSZwYWdlPSUyRmFwaSUyRnNlYXJjaCZwcmVmZXJyZWRSZWdpb249JmFic29sdXRlUGFnZVBhdGg9LiUyRnBhZ2VzJTJGYXBpJTJGc2VhcmNoLmpzJm1pZGRsZXdhcmVDb25maWdCYXNlNjQ9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7OztBQUFzRztBQUN2QztBQUNMO0FBQzFEO0FBQ2tEO0FBQ2xEO0FBQ0EsaUVBQWUsd0VBQUssQ0FBQyxpREFBUSxZQUFZLEVBQUM7QUFDMUM7QUFDTyxlQUFlLHdFQUFLLENBQUMsaURBQVE7QUFDcEM7QUFDTyx3QkFBd0IsZ0hBQW1CO0FBQ2xEO0FBQ0EsY0FBYyx5RUFBUztBQUN2QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMLFlBQVk7QUFDWixDQUFDOztBQUVELHFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbXktZ3JhcGhxbC1wcm9qZWN0Lz85YzRmIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IFBhZ2VzQVBJUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgaG9pc3QgfSBmcm9tIFwibmV4dC9kaXN0L2J1aWxkL3RlbXBsYXRlcy9oZWxwZXJzXCI7XG4vLyBJbXBvcnQgdGhlIHVzZXJsYW5kIGNvZGUuXG5pbXBvcnQgKiBhcyB1c2VybGFuZCBmcm9tIFwiLi9wYWdlcy9hcGkvc2VhcmNoLmpzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsIFwiZGVmYXVsdFwiKTtcbi8vIFJlLWV4cG9ydCBjb25maWcuXG5leHBvcnQgY29uc3QgY29uZmlnID0gaG9pc3QodXNlcmxhbmQsIFwiY29uZmlnXCIpO1xuLy8gQ3JlYXRlIGFuZCBleHBvcnQgdGhlIHJvdXRlIG1vZHVsZSB0aGF0IHdpbGwgYmUgY29uc3VtZWQuXG5leHBvcnQgY29uc3Qgcm91dGVNb2R1bGUgPSBuZXcgUGFnZXNBUElSb3V0ZU1vZHVsZSh7XG4gICAgZGVmaW5pdGlvbjoge1xuICAgICAgICBraW5kOiBSb3V0ZUtpbmQuUEFHRVNfQVBJLFxuICAgICAgICBwYWdlOiBcIi9hcGkvc2VhcmNoXCIsXG4gICAgICAgIHBhdGhuYW1lOiBcIi9hcGkvc2VhcmNoXCIsXG4gICAgICAgIC8vIFRoZSBmb2xsb3dpbmcgYXJlbid0IHVzZWQgaW4gcHJvZHVjdGlvbi5cbiAgICAgICAgYnVuZGxlUGF0aDogXCJcIixcbiAgICAgICAgZmlsZW5hbWU6IFwiXCJcbiAgICB9LFxuICAgIHVzZXJsYW5kXG59KTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9cGFnZXMtYXBpLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsearch&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsearch.js&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api)/./pages/api/search.js":
/*!*****************************!*\
  !*** ./pages/api/search.js ***!
  \*****************************/
/***/ ((module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.a(module, async (__webpack_handle_async_dependencies__, __webpack_async_result__) => { try {\n__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var axios__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! axios */ \"axios\");\n/* harmony import */ var ioredis__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ioredis */ \"ioredis\");\n/* harmony import */ var ioredis__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(ioredis__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! dotenv */ \"dotenv\");\n/* harmony import */ var dotenv__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(dotenv__WEBPACK_IMPORTED_MODULE_2__);\nvar __webpack_async_dependencies__ = __webpack_handle_async_dependencies__([axios__WEBPACK_IMPORTED_MODULE_0__]);\naxios__WEBPACK_IMPORTED_MODULE_0__ = (__webpack_async_dependencies__.then ? (await __webpack_async_dependencies__)() : __webpack_async_dependencies__)[0];\n\n\n\n// Load environment variables from .env.local\ndotenv__WEBPACK_IMPORTED_MODULE_2___default().config();\n// Extract the Redis URL from environment variables\nconst redisUrl = process.env.UPSTASH_REDIS_URL;\n// Initialize Redis client with enhanced settings and TLS/SSL enabled\nconst redis = new (ioredis__WEBPACK_IMPORTED_MODULE_1___default())(redisUrl, {\n    tls: {\n        rejectUnauthorized: false\n    },\n    connectTimeout: 10000,\n    retryStrategy: (times)=>{\n        // Exponential backoff retry strategy\n        const delay = Math.min(times * 50, 2000); // Try up to 2 seconds between retries\n        console.log(`Reconnecting to Redis after ${delay}ms`);\n        return delay;\n    }\n});\nredis.on(\"error\", (err)=>{\n    console.error(\"Redis error:\", err);\n});\nredis.on(\"connect\", ()=>{\n    console.log(\"Connected to Redis\");\n});\nredis.on(\"reconnecting\", (delay)=>{\n    console.log(`Reconnecting to Redis after ${delay}ms`);\n});\nconst mapBluecartProduct = (item)=>({\n        asin: item.product.item_id,\n        brand: item.product.brand,\n        title: item.product.title,\n        link: item.product.link,\n        image: item.product.main_image || (item.product.images.length > 0 ? item.product.images[0] : \"\"),\n        isPrime: false,\n        rating: item.product.rating || 0,\n        ratingsTotal: item.product.ratings_total || 0,\n        price: item.offers.primary ? `${item.offers.primary.currency_symbol}${item.offers.primary.price}` : \"N/A\",\n        availability: item.inventory.in_stock ? \"In stock\" : \"Out of stock\",\n        delivery: {\n            tagline: item.fulfillment.shipping ? `Shipping available in ${item.fulfillment.shipping_days} days` : \"No shipping available\",\n            price: \"\"\n        },\n        shoppingAdvisors: []\n    });\nasync function handler(req, res) {\n    if (req.method !== \"GET\") {\n        console.log(\"Method not allowed\");\n        return res.status(405).end(); // Method Not Allowed\n    }\n    const { term, page } = req.query;\n    const cacheKey = `search:${term}:${page || 1}`;\n    try {\n        // Check cache first\n        const cachedResults = await redis.get(cacheKey);\n        if (cachedResults) {\n            console.log(\"Serving from cache\");\n            return res.status(200).json(JSON.parse(cachedResults));\n        }\n        const rainforestParams = {\n            api_key: process.env.RAINFOREST_API_KEY,\n            type: \"search\",\n            amazon_domain: \"amazon.com\",\n            search_term: term,\n            exclude_sponsored: \"true\",\n            currency: \"usd\",\n            associate_id: \"curios-20\",\n            page: page || \"1\",\n            max_page: page || \"1\",\n            output: \"json\",\n            include_html: \"false\"\n        };\n        const bluecartParams = {\n            api_key: process.env.BLUECART_API_KEY,\n            search_term: term,\n            type: \"search\",\n            sort_by: \"best_match\",\n            page: page || \"1\",\n            max_page: page || \"1\",\n            output: \"json\",\n            include_html: \"false\"\n        };\n        const [rainforestResponse, bluecartResponse] = await Promise.all([\n            axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(\"https://api.rainforestapi.com/request\", {\n                params: rainforestParams\n            }),\n            axios__WEBPACK_IMPORTED_MODULE_0__[\"default\"].get(\"https://api.bluecartapi.com/request\", {\n                params: bluecartParams\n            })\n        ]);\n        if (rainforestResponse.status === 200 && bluecartResponse.status === 200) {\n            const rainforestResults = rainforestResponse.data.search_results.map((item)=>({\n                    asin: item.asin,\n                    brand: item.brand,\n                    title: item.title,\n                    link: item.link,\n                    image: item.image,\n                    isPrime: item.is_prime,\n                    rating: item.rating,\n                    ratingsTotal: item.ratings_total,\n                    price: item.price ? item.price.raw : \"N/A\",\n                    availability: item.availability,\n                    delivery: item.delivery || {\n                        tagline: \"\",\n                        price: \"\"\n                    },\n                    shoppingAdvisors: item.shopping_advisors || []\n                }));\n            const bluecartResults = bluecartResponse.data.search_results.map(mapBluecartProduct);\n            const combinedResults = [\n                ...rainforestResults,\n                ...bluecartResults\n            ];\n            // Cache the results with an expiration time\n            await redis.set(cacheKey, JSON.stringify({\n                results: combinedResults\n            }), \"EX\", 84400); // Cache for 72 hours\n            return res.status(200).json({\n                results: combinedResults\n            });\n        } else {\n            throw new Error(`API calls failed with statuses: Rainforest: ${rainforestResponse.status}, Bluecart: ${bluecartResponse.status}`);\n        }\n    } catch (error) {\n        console.error(\"Search API error:\", error.message);\n        if (error.response) {\n            return res.status(error.response.status).json({\n                message: error.response.data.message\n            });\n        } else {\n            return res.status(500).json({\n                error: \"Internal Server Error\"\n            });\n        }\n    }\n}\n\n__webpack_async_result__();\n} catch(e) { __webpack_async_result__(e); } });//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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eS1ncmFwaHFsLXByb2plY3QvLi9wYWdlcy9hcGkvc2VhcmNoLmpzPzVkM2EiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGF4aW9zIGZyb20gJ2F4aW9zJztcbmltcG9ydCBSZWRpcyBmcm9tICdpb3JlZGlzJztcbmltcG9ydCBkb3RlbnYgZnJvbSAnZG90ZW52JztcblxuLy8gTG9hZCBlbnZpcm9ubWVudCB2YXJpYWJsZXMgZnJvbSAuZW52LmxvY2FsXG5kb3RlbnYuY29uZmlnKCk7XG5cbi8vIEV4dHJhY3QgdGhlIFJlZGlzIFVSTCBmcm9tIGVudmlyb25tZW50IHZhcmlhYmxlc1xuY29uc3QgcmVkaXNVcmwgPSBwcm9jZXNzLmVudi5VUFNUQVNIX1JFRElTX1VSTDtcblxuLy8gSW5pdGlhbGl6ZSBSZWRpcyBjbGllbnQgd2l0aCBlbmhhbmNlZCBzZXR0aW5ncyBhbmQgVExTL1NTTCBlbmFibGVkXG5jb25zdCByZWRpcyA9IG5ldyBSZWRpcyhyZWRpc1VybCwge1xuICB0bHM6IHtcbiAgICByZWplY3RVbmF1dGhvcml6ZWQ6IGZhbHNlLCAvLyBTZXQgdG8gdHJ1ZSBpbiBwcm9kdWN0aW9uIHdpdGggYSB0cnVzdGVkIGNlcnRpZmljYXRlIGF1dGhvcml0eVxuICB9LFxuICBjb25uZWN0VGltZW91dDogMTAwMDAsIC8vIDEwIHNlY29uZHMgY29ubmVjdGlvbiB0aW1lb3V0XG4gIHJldHJ5U3RyYXRlZ3k6ICh0aW1lcykgPT4ge1xuICAgIC8vIEV4cG9uZW50aWFsIGJhY2tvZmYgcmV0cnkgc3RyYXRlZ3lcbiAgICBjb25zdCBkZWxheSA9IE1hdGgubWluKHRpbWVzICogNTAsIDIwMDApOyAvLyBUcnkgdXAgdG8gMiBzZWNvbmRzIGJldHdlZW4gcmV0cmllc1xuICAgIGNvbnNvbGUubG9nKGBSZWNvbm5lY3RpbmcgdG8gUmVkaXMgYWZ0ZXIgJHtkZWxheX1tc2ApO1xuICAgIHJldHVybiBkZWxheTtcbiAgfSxcbn0pO1xuXG5yZWRpcy5vbignZXJyb3InLCAoZXJyKSA9PiB7XG4gIGNvbnNvbGUuZXJyb3IoJ1JlZGlzIGVycm9yOicsIGVycik7XG59KTtcblxucmVkaXMub24oJ2Nvbm5lY3QnLCAoKSA9PiB7XG4gIGNvbnNvbGUubG9nKCdDb25uZWN0ZWQgdG8gUmVkaXMnKTtcbn0pO1xuXG5yZWRpcy5vbigncmVjb25uZWN0aW5nJywgKGRlbGF5KSA9PiB7XG4gIGNvbnNvbGUubG9nKGBSZWNvbm5lY3RpbmcgdG8gUmVkaXMgYWZ0ZXIgJHtkZWxheX1tc2ApO1xufSk7XG5cbmNvbnN0IG1hcEJsdWVjYXJ0UHJvZHVjdCA9IChpdGVtKSA9PiAoe1xuICBhc2luOiBpdGVtLnByb2R1Y3QuaXRlbV9pZCxcbiAgYnJhbmQ6IGl0ZW0ucHJvZHVjdC5icmFuZCxcbiAgdGl0bGU6IGl0ZW0ucHJvZHVjdC50aXRsZSxcbiAgbGluazogaXRlbS5wcm9kdWN0LmxpbmssXG4gIGltYWdlOiBpdGVtLnByb2R1Y3QubWFpbl9pbWFnZSB8fCAoaXRlbS5wcm9kdWN0LmltYWdlcy5sZW5ndGggPiAwID8gaXRlbS5wcm9kdWN0LmltYWdlc1swXSA6IFwiXCIpLFxuICBpc1ByaW1lOiBmYWxzZSxcbiAgcmF0aW5nOiBpdGVtLnByb2R1Y3QucmF0aW5nIHx8IDAsXG4gIHJhdGluZ3NUb3RhbDogaXRlbS5wcm9kdWN0LnJhdGluZ3NfdG90YWwgfHwgMCxcbiAgcHJpY2U6IGl0ZW0ub2ZmZXJzLnByaW1hcnkgPyBgJHtpdGVtLm9mZmVycy5wcmltYXJ5LmN1cnJlbmN5X3N5bWJvbH0ke2l0ZW0ub2ZmZXJzLnByaW1hcnkucHJpY2V9YCA6IFwiTi9BXCIsXG4gIGF2YWlsYWJpbGl0eTogaXRlbS5pbnZlbnRvcnkuaW5fc3RvY2sgPyBcIkluIHN0b2NrXCIgOiBcIk91dCBvZiBzdG9ja1wiLFxuICBkZWxpdmVyeToge1xuICAgIHRhZ2xpbmU6IGl0ZW0uZnVsZmlsbG1lbnQuc2hpcHBpbmcgPyBgU2hpcHBpbmcgYXZhaWxhYmxlIGluICR7aXRlbS5mdWxmaWxsbWVudC5zaGlwcGluZ19kYXlzfSBkYXlzYCA6IFwiTm8gc2hpcHBpbmcgYXZhaWxhYmxlXCIsXG4gICAgcHJpY2U6IFwiXCJcbiAgfSxcbiAgc2hvcHBpbmdBZHZpc29yczogW10sXG59KTtcblxuZXhwb3J0IGRlZmF1bHQgYXN5bmMgZnVuY3Rpb24gaGFuZGxlcihyZXEsIHJlcykge1xuICBpZiAocmVxLm1ldGhvZCAhPT0gJ0dFVCcpIHtcbiAgICBjb25zb2xlLmxvZygnTWV0aG9kIG5vdCBhbGxvd2VkJyk7XG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoNDA1KS5lbmQoKTsgLy8gTWV0aG9kIE5vdCBBbGxvd2VkXG4gIH1cblxuICBjb25zdCB7IHRlcm0sIHBhZ2UgfSA9IHJlcS5xdWVyeTtcbiAgY29uc3QgY2FjaGVLZXkgPSBgc2VhcmNoOiR7dGVybX06JHtwYWdlIHx8IDF9YDtcblxuICB0cnkge1xuICAgIC8vIENoZWNrIGNhY2hlIGZpcnN0XG4gICAgY29uc3QgY2FjaGVkUmVzdWx0cyA9IGF3YWl0IHJlZGlzLmdldChjYWNoZUtleSk7XG4gICAgaWYgKGNhY2hlZFJlc3VsdHMpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdTZXJ2aW5nIGZyb20gY2FjaGUnKTtcbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbihKU09OLnBhcnNlKGNhY2hlZFJlc3VsdHMpKTtcbiAgICB9XG5cbiAgICBjb25zdCByYWluZm9yZXN0UGFyYW1zID0ge1xuICAgICAgYXBpX2tleTogcHJvY2Vzcy5lbnYuUkFJTkZPUkVTVF9BUElfS0VZLFxuICAgICAgdHlwZTogXCJzZWFyY2hcIixcbiAgICAgIGFtYXpvbl9kb21haW46IFwiYW1hem9uLmNvbVwiLFxuICAgICAgc2VhcmNoX3Rlcm06IHRlcm0sXG4gICAgICBleGNsdWRlX3Nwb25zb3JlZDogXCJ0cnVlXCIsXG4gICAgICBjdXJyZW5jeTogXCJ1c2RcIixcbiAgICAgIGFzc29jaWF0ZV9pZDogXCJjdXJpb3MtMjBcIixcbiAgICAgIHBhZ2U6IHBhZ2UgfHwgXCIxXCIsXG4gICAgICBtYXhfcGFnZTogcGFnZSB8fCBcIjFcIixcbiAgICAgIG91dHB1dDogXCJqc29uXCIsXG4gICAgICBpbmNsdWRlX2h0bWw6IFwiZmFsc2VcIlxuICAgIH07XG5cbiAgICBjb25zdCBibHVlY2FydFBhcmFtcyA9IHtcbiAgICAgIGFwaV9rZXk6IHByb2Nlc3MuZW52LkJMVUVDQVJUX0FQSV9LRVksXG4gICAgICBzZWFyY2hfdGVybTogdGVybSxcbiAgICAgIHR5cGU6IFwic2VhcmNoXCIsXG4gICAgICBzb3J0X2J5OiBcImJlc3RfbWF0Y2hcIixcbiAgICAgIHBhZ2U6IHBhZ2UgfHwgXCIxXCIsXG4gICAgICBtYXhfcGFnZTogcGFnZSB8fCBcIjFcIixcbiAgICAgIG91dHB1dDogXCJqc29uXCIsXG4gICAgICBpbmNsdWRlX2h0bWw6IFwiZmFsc2VcIlxuICAgIH07XG5cbiAgICBjb25zdCBbcmFpbmZvcmVzdFJlc3BvbnNlLCBibHVlY2FydFJlc3BvbnNlXSA9IGF3YWl0IFByb21pc2UuYWxsKFtcbiAgICAgIGF4aW9zLmdldCgnaHR0cHM6Ly9hcGkucmFpbmZvcmVzdGFwaS5jb20vcmVxdWVzdCcsIHsgcGFyYW1zOiByYWluZm9yZXN0UGFyYW1zIH0pLFxuICAgICAgYXhpb3MuZ2V0KCdodHRwczovL2FwaS5ibHVlY2FydGFwaS5jb20vcmVxdWVzdCcsIHsgcGFyYW1zOiBibHVlY2FydFBhcmFtcyB9KVxuICAgIF0pO1xuXG4gICAgaWYgKHJhaW5mb3Jlc3RSZXNwb25zZS5zdGF0dXMgPT09IDIwMCAmJiBibHVlY2FydFJlc3BvbnNlLnN0YXR1cyA9PT0gMjAwKSB7XG4gICAgICBjb25zdCByYWluZm9yZXN0UmVzdWx0cyA9IHJhaW5mb3Jlc3RSZXNwb25zZS5kYXRhLnNlYXJjaF9yZXN1bHRzLm1hcCgoaXRlbSkgPT4gKHtcbiAgICAgICAgYXNpbjogaXRlbS5hc2luLFxuICAgICAgICBicmFuZDogaXRlbS5icmFuZCxcbiAgICAgICAgdGl0bGU6IGl0ZW0udGl0bGUsXG4gICAgICAgIGxpbms6IGl0ZW0ubGluayxcbiAgICAgICAgaW1hZ2U6IGl0ZW0uaW1hZ2UsXG4gICAgICAgIGlzUHJpbWU6IGl0ZW0uaXNfcHJpbWUsXG4gICAgICAgIHJhdGluZzogaXRlbS5yYXRpbmcsXG4gICAgICAgIHJhdGluZ3NUb3RhbDogaXRlbS5yYXRpbmdzX3RvdGFsLFxuICAgICAgICBwcmljZTogaXRlbS5wcmljZSA/IGl0ZW0ucHJpY2UucmF3IDogXCJOL0FcIixcbiAgICAgICAgYXZhaWxhYmlsaXR5OiBpdGVtLmF2YWlsYWJpbGl0eSxcbiAgICAgICAgZGVsaXZlcnk6IGl0ZW0uZGVsaXZlcnkgfHwgeyB0YWdsaW5lOiBcIlwiLCBwcmljZTogXCJcIiB9LFxuICAgICAgICBzaG9wcGluZ0Fkdmlzb3JzOiBpdGVtLnNob3BwaW5nX2Fkdmlzb3JzIHx8IFtdLFxuICAgICAgfSkpO1xuXG4gICAgICBjb25zdCBibHVlY2FydFJlc3VsdHMgPSBibHVlY2FydFJlc3BvbnNlLmRhdGEuc2VhcmNoX3Jlc3VsdHMubWFwKG1hcEJsdWVjYXJ0UHJvZHVjdCk7XG5cbiAgICAgIGNvbnN0IGNvbWJpbmVkUmVzdWx0cyA9IFtcbiAgICAgICAgLi4ucmFpbmZvcmVzdFJlc3VsdHMsXG4gICAgICAgIC4uLmJsdWVjYXJ0UmVzdWx0c1xuICAgICAgXTtcblxuICAgICAgLy8gQ2FjaGUgdGhlIHJlc3VsdHMgd2l0aCBhbiBleHBpcmF0aW9uIHRpbWVcbiAgICAgIGF3YWl0IHJlZGlzLnNldChjYWNoZUtleSwgSlNPTi5zdHJpbmdpZnkoeyByZXN1bHRzOiBjb21iaW5lZFJlc3VsdHMgfSksICdFWCcsIDg0NDAwKTsgLy8gQ2FjaGUgZm9yIDcyIGhvdXJzXG5cbiAgICAgIHJldHVybiByZXMuc3RhdHVzKDIwMCkuanNvbih7IHJlc3VsdHM6IGNvbWJpbmVkUmVzdWx0cyB9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKGBBUEkgY2FsbHMgZmFpbGVkIHdpdGggc3RhdHVzZXM6IFJhaW5mb3Jlc3Q6ICR7cmFpbmZvcmVzdFJlc3BvbnNlLnN0YXR1c30sIEJsdWVjYXJ0OiAke2JsdWVjYXJ0UmVzcG9uc2Uuc3RhdHVzfWApO1xuICAgIH1cbiAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICBjb25zb2xlLmVycm9yKCdTZWFyY2ggQVBJIGVycm9yOicsIGVycm9yLm1lc3NhZ2UpO1xuICAgIGlmIChlcnJvci5yZXNwb25zZSkge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoZXJyb3IucmVzcG9uc2Uuc3RhdHVzKS5qc29uKHsgbWVzc2FnZTogZXJyb3IucmVzcG9uc2UuZGF0YS5tZXNzYWdlIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBlcnJvcjogJ0ludGVybmFsIFNlcnZlciBFcnJvcicgfSk7XG4gICAgfVxuICB9XG59XG4iXSwibmFtZXMiOlsiYXhpb3MiLCJSZWRpcyIsImRvdGVudiIsImNvbmZpZyIsInJlZGlzVXJsIiwicHJvY2VzcyIsImVudiIsIlVQU1RBU0hfUkVESVNfVVJMIiwicmVkaXMiLCJ0bHMiLCJyZWplY3RVbmF1dGhvcml6ZWQiLCJjb25uZWN0VGltZW91dCIsInJldHJ5U3RyYXRlZ3kiLCJ0aW1lcyIsImRlbGF5IiwiTWF0aCIsIm1pbiIsImNvbnNvbGUiLCJsb2ciLCJvbiIsImVyciIsImVycm9yIiwibWFwQmx1ZWNhcnRQcm9kdWN0IiwiaXRlbSIsImFzaW4iLCJwcm9kdWN0IiwiaXRlbV9pZCIsImJyYW5kIiwidGl0bGUiLCJsaW5rIiwiaW1hZ2UiLCJtYWluX2ltYWdlIiwiaW1hZ2VzIiwibGVuZ3RoIiwiaXNQcmltZSIsInJhdGluZyIsInJhdGluZ3NUb3RhbCIsInJhdGluZ3NfdG90YWwiLCJwcmljZSIsIm9mZmVycyIsInByaW1hcnkiLCJjdXJyZW5jeV9zeW1ib2wiLCJhdmFpbGFiaWxpdHkiLCJpbnZlbnRvcnkiLCJpbl9zdG9jayIsImRlbGl2ZXJ5IiwidGFnbGluZSIsImZ1bGZpbGxtZW50Iiwic2hpcHBpbmciLCJzaGlwcGluZ19kYXlzIiwic2hvcHBpbmdBZHZpc29ycyIsImhhbmRsZXIiLCJyZXEiLCJyZXMiLCJtZXRob2QiLCJzdGF0dXMiLCJlbmQiLCJ0ZXJtIiwicGFnZSIsInF1ZXJ5IiwiY2FjaGVLZXkiLCJjYWNoZWRSZXN1bHRzIiwiZ2V0IiwianNvbiIsIkpTT04iLCJwYXJzZSIsInJhaW5mb3Jlc3RQYXJhbXMiLCJhcGlfa2V5IiwiUkFJTkZPUkVTVF9BUElfS0VZIiwidHlwZSIsImFtYXpvbl9kb21haW4iLCJzZWFyY2hfdGVybSIsImV4Y2x1ZGVfc3BvbnNvcmVkIiwiY3VycmVuY3kiLCJhc3NvY2lhdGVfaWQiLCJtYXhfcGFnZSIsIm91dHB1dCIsImluY2x1ZGVfaHRtbCIsImJsdWVjYXJ0UGFyYW1zIiwiQkxVRUNBUlRfQVBJX0tFWSIsInNvcnRfYnkiLCJyYWluZm9yZXN0UmVzcG9uc2UiLCJibHVlY2FydFJlc3BvbnNlIiwiUHJvbWlzZSIsImFsbCIsInBhcmFtcyIsInJhaW5mb3Jlc3RSZXN1bHRzIiwiZGF0YSIsInNlYXJjaF9yZXN1bHRzIiwibWFwIiwiaXNfcHJpbWUiLCJyYXciLCJzaG9wcGluZ19hZHZpc29ycyIsImJsdWVjYXJ0UmVzdWx0cyIsImNvbWJpbmVkUmVzdWx0cyIsInNldCIsInN0cmluZ2lmeSIsInJlc3VsdHMiLCJFcnJvciIsIm1lc3NhZ2UiLCJyZXNwb25zZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api)/./pages/api/search.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fsearch&preferredRegion=&absolutePagePath=.%2Fpages%2Fapi%2Fsearch.js&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();